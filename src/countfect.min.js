$(document).ready(function () {
  $(window).on("scroll", function () {
    checkSection();
  });

  function checkSection() {
    var scrollPosition = $(window).scrollTop();
    var windowHeight = $(window).height();

    $("section").each(function () {
      var sectionOffset = $(this).offset().top;
      var sectionHeight = $(this).outerHeight();

      if (
        scrollPosition + windowHeight > sectionOffset &&
        scrollPosition < sectionOffset + sectionHeight
      ) {
        onSectionInView($(this).attr("id"));
      }
    });
  }

  function onSectionInView(sectionId) {
    console.log("Section in view:", sectionId);
    // Your custom function here
    $(".countfect").each(function () {
      var $this = $(this),
        countTo = $this.attr("data-num");
      delayTo = $this.attr("delay");
      if (!delayTo) {
        delayTo = 1000;
      }
      $({ countNum: $this.text() }).animate(
        { countNum: countTo },
        {
          duration: delayTo,
          easing: "linear",
          step: function () {
            $this.text(Math.floor(this.countNum));
          },
          complete: function () {
            $this.text(this.countNum);
          },
        }
      );
    });
  }

  // Initial check
  checkSection();
});
